    pipeline {
      agent any
      
      stages {
      
           stage('Docker Build and Tag') {
           steps {
                    script{ 
                    def version = readFile('VERSION')
                    def versions = version.split('\\.')
                    def major = versions[0]
                    def minor = versions[0] + '.' + versions[1]
                    def patch = version.trim()
           sh 'docker build -t employee-api .'
           sh 'docker tag employee-api mayanks95/employee-api:v1.0.0'
           }
         }
      }
        stage('Publish image to Docker Hub') {
             steps {
             sh 'echo $dockerhub_PSW |docker login -u mayanks95 -p mayank@9570'
             sh 'docker push mayanks95/employee-api:v1.0.0'
             
             }
         }
         stage('Run Docker container on Jenkins Agent') {
         
             steps {
                 sh "docker run -d -p 5050:5050 mayanks95/employee-api"
                 
               }
             }
             
          }
          
       }
          
